{% extends "base.html" %}

{% block title %}{% if mode == 'tambah' %}Tambah Anggota{% else %}Edit Anggota{% endif %}{% endblock %}
{% block page_title %}{% if mode == 'tambah' %}Tambah Anggota Baru{% else %}Edit Data Anggota{% endif %}{% endblock %}

{% block content %}
<div class="section-header">
    <a href="{{ url_for('anggota_list') }}" class="btn btn-secondary btn-sm">
        <i class="bi bi-arrow-left"></i> Kembali
    </a>
</div>

<div style="max-width: 800px;">
    <div class="card">
        <div class="card-header">
            <h2>
                <i class="bi bi-{% if mode == 'tambah' %}person-plus-fill{% else %}pencil-fill{% endif %}" style="color: var(--gold-400);"></i>
                {% if mode == 'tambah' %}Form Pendaftaran Anggota{% else %}Edit Data {{ anggota.nama }}{% endif %}
            </h2>
        </div>
        <div class="card-body">
            <form method="POST">
                <!-- Section: Identitas -->
                <div style="margin-bottom: 24px;">
                    <h3 style="font-family: 'Bebas Neue', sans-serif; font-size: 16px; color: var(--text-accent); letter-spacing: 1px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                        DATA IDENTITAS
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Nama Lengkap</label>
                            <input type="text" name="nama" class="form-input" value="{{ anggota.nama if anggota else '' }}" placeholder="Nama lengkap anggota" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">NRP</label>
                            <input type="text" name="nrp" class="form-input" value="{{ anggota.nrp if anggota else '' }}" placeholder="Nomor Registrasi Pokok" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Pangkat</label>
                            <select name="pangkat" class="form-select" required>
                                <option value="">— Pilih Pangkat —</option>
                                {% for p in ['Prajurit Dua', 'Prajurit Satu', 'Prajurit Kepala', 'Kopral Dua', 'Kopral Satu', 'Kopral Kepala', 'Sersan Dua', 'Sersan Satu', 'Sersan Kepala'] %}
                                <option value="{{ p }}" {% if anggota and anggota.pangkat == p %}selected{% endif %}>{{ p }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Jabatan</label>
                            <input type="text" name="jabatan" class="form-input" value="{{ anggota.jabatan if anggota else '' }}" placeholder="Jabatan" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Satuan</label>
                            <input type="text" name="satuan" class="form-input" value="{{ anggota.satuan if anggota else 'Poltekkad' }}" placeholder="Satuan">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Jurusan</label>
                            <select name="jurusan" class="form-select">
                                <option value="">— Pilih Jurusan —</option>
                                {% for j in ['Teknik Elektronika', 'Teknik Mesin', 'Teknik Informatika'] %}
                                <option value="{{ j }}" {% if anggota and anggota.jurusan == j %}selected{% endif %}>{{ j }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Section: Data Pribadi -->
                <div style="margin-bottom: 24px;">
                    <h3 style="font-family: 'Bebas Neue', sans-serif; font-size: 16px; color: var(--text-accent); letter-spacing: 1px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                        DATA PRIBADI
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Tempat Lahir</label>
                            <input type="text" name="tempat_lahir" class="form-input" value="{{ anggota.tempat_lahir if anggota else '' }}" placeholder="Kota kelahiran">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Tanggal Lahir</label>
                            <input type="date" name="tanggal_lahir" class="form-input">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Golongan Darah</label>
                            <select name="golongan_darah" class="form-select">
                                <option value="">— Pilih —</option>
                                {% for g in ['A', 'B', 'AB', 'O'] %}
                                <option value="{{ g }}" {% if anggota and anggota.golongan_darah == g %}selected{% endif %}>{{ g }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Agama</label>
                            <select name="agama" class="form-select">
                                <option value="">— Pilih —</option>
                                {% for ag in ['Islam', 'Kristen', 'Katolik', 'Hindu', 'Buddha', 'Konghucu'] %}
                                <option value="{{ ag }}" {% if anggota and anggota.agama == ag %}selected{% endif %}>{{ ag }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Alamat</label>
                        <textarea name="alamat" class="form-textarea" placeholder="Alamat lengkap">{{ anggota.alamat if anggota else '' }}</textarea>
                    </div>
                </div>

                <!-- Section: Kartu Pintar -->
                <div style="margin-bottom: 24px;">
                    <h3 style="font-family: 'Bebas Neue', sans-serif; font-size: 16px; color: var(--text-accent); letter-spacing: 1px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                        DATA KARTU PINTAR
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">NFC UID</label>
                            <input type="text" name="nfc_uid" class="form-input" value="{{ anggota.nfc_uid if anggota else '' }}" placeholder="UID dari kartu NFC">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Status Kartu</label>
                            <select name="status_kartu" class="form-select">
                                <option value="Aktif" {% if anggota and anggota.status_kartu == 'Aktif' %}selected{% endif %}>Aktif</option>
                                <option value="Hilang" {% if anggota and anggota.status_kartu == 'Hilang' %}selected{% endif %}>Hilang</option>
                                <option value="Nonaktif">Nonaktif</option>
                            </select>
                        </div>
                    </div>
                    {% if mode == 'tambah' %}
                    <div class="form-group">
                        <label class="form-label">Saldo Awal</label>
                        <input type="number" name="saldo" class="form-input" value="0" min="0" step="1000" placeholder="Saldo awal kartu">
                    </div>
                    {% endif %}
                </div>

                <div style="display: flex; gap: 12px; justify-content: flex-end; padding-top: 16px; border-top: 1px solid var(--border-color);">
                    <a href="{{ url_for('anggota_list') }}" class="btn btn-secondary">Batal</a>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-lg"></i>
                        {% if mode == 'tambah' %}Simpan Anggota{% else %}Update Data{% endif %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
